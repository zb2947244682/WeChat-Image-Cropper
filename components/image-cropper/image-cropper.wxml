<view class="image-cropper {{fullscreen ? 'fullscreen-mode' : ''}}" wx:if="{{show}}">
  <view class="cropper-container {{fullscreen ? 'fullscreen-container' : ''}}">
    <view class="cropper-header" wx:if="{{!fullscreen}}">
      <text class="title">裁切图片</text>
    </view>
    
    <view class="cropper-content">
      <view class="canvas-container" wx:if="{{imageSrc}}">
        <!-- 图片Canvas（底层，只绘制一次） -->
        <canvas 
          id="imageCanvas" 
          type="2d"
          class="image-canvas"
          style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
        ></canvas>
        
        <!-- 遮罩Canvas（顶层，触摸时更新） -->
        <canvas 
          id="maskCanvas" 
          type="2d"
          class="mask-canvas"
          style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
          bindtouchstart="onTouchStart"
          bindtouchmove="onTouchMove"
          bindtouchend="onTouchEnd"
        ></canvas>
      </view>
      
      <view class="select-image" wx:else>
        <button class="select-btn" bindtap="chooseImage">选择图片</button>
      </view>
    </view>
    
    <view class="cropper-footer {{fullscreen ? 'fullscreen-footer' : ''}}" wx:if="{{imageSrc}}">
      <button class="btn cancel-btn" bindtap="cancel">取消</button>
      <button class="btn confirm-btn" bindtap="confirmCrop">确认</button>
    </view>
  </view>
  
  <canvas id="tempCanvas" type="2d" class="temp-canvas"></canvas>
</view>
